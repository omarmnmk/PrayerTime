<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Prayer Times Notifications</title>

<!-- OneSignal SDK -->
<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
<script>
  window.OneSignal = window.OneSignal || [];
  OneSignal.push(function() {
    OneSignal.init({
      appId: "Y598c308f-f74e-4449-8635-b9033d340cbc" // This will be dynamically filled by your deployment, if needed
    });
  });
</script>
</head>

<body>
  <h1>Today's Prayer Times</h1>
  <div id="prayer-times"></div>

  <button onclick="subscribeUser()">Subscribe to Notifications</button>

  <script>
    
    fetch('https://prayertime.fly.dev')  // use your real Fly.io server URL
      .then(response => response.json())
  .then(prayerTimes => {
    const container = document.getElementById("prayer-times");
    for (const [prayer, times] of Object.entries(prayerTimes)) {
      const div = document.createElement("div");
      div.innerHTML = `<strong>${prayer}</strong>: Azan - ${times.azan}, Iqama - ${times.iqama}`;
      container.appendChild(div);
    }
  });


    // Notifications subscribe button
    function subscribeUser() {
      OneSignal.push(function() {
        OneSignal.showNativePrompt();
      });
    }
  </script>
</body>
</html>
